<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>TLOIN ERP v24.4 - SECURE ATTENDANCE</title>
    <style>
        :root { 
            --navy: #050a30; --gold: #ffcc00; --bg: #f4f7f6; --white: #ffffff; 
            --border: #ced4da; --health: #c0392b; --attendance: #27ae60; --lock: #7f8c8d;
        }
        body, html { margin: 0; padding: 0; height: 100vh; font-family: 'Inter', sans-serif; background: var(--bg); overflow: hidden; }
        #tloin-nexus { display: grid; grid-template-columns: 280px 1fr; height: 100vh; }
        
        #sidebar { background: var(--navy); color: white; border-right: 5px solid var(--gold); overflow-y: auto; }
        .brand { padding: 20px; text-align: center; border-bottom: 1px solid rgba(255,255,255,0.1); }
        .brand h2 { margin: 0; font-size: 11px; color: var(--gold); text-transform: uppercase; }

        #main-dashboard { padding: 30px; overflow-y: auto; box-sizing: border-box; }
        .desk-header { display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid var(--attendance); padding-bottom: 15px; margin-bottom: 25px; }
        
        /* SEARCH BAR */
        .search-nexus { background: var(--white); border: 1px solid var(--border); padding: 10px; border-radius: 4px; display: flex; align-items: center; margin-bottom: 20px; }
        #student-search { flex: 1; border: none; outline: none; font-size: 12px; padding-left: 10px; }

        .grid-attendance { display: grid; grid-template-columns: 1.2fr 1fr; gap: 25px; }
        .card { background: var(--white); border: 1px solid var(--border); padding: 20px; border-radius: 8px; position: relative; }
        
        /* LOCK OVERLAY */
        #lock-overlay { display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(255,255,255,0.9); z-index: 100; flex-direction: column; align-items: center; justify-content: center; text-align: center; border-radius: 8px; }
        
        label { display: block; font-size: 9px; font-weight: 800; color: var(--navy); text-transform: uppercase; margin-bottom: 5px; }
        select, input, textarea { width: 100%; padding: 10px; border: 1px solid var(--border); border-radius: 4px; font-size: 12px; margin-bottom: 15px; }
        
        .data-table { width: 100%; border-collapse: collapse; font-size: 11px; }
        .data-table th { text-align: left; padding: 10px; background: #f8f9fa; border-bottom: 2px solid var(--navy); font-size: 9px; }
        .data-table td { padding: 10px; border-bottom: 1px solid #eee; }

        .btn-log { background: var(--attendance); color: white; border: none; padding: 10px 20px; border-radius: 4px; cursor: pointer; font-weight: 700; text-transform: uppercase; font-size: 10px; }
        .btn-unlock { background: var(--navy); margin-top: 10px; }
    </style>
</head>
<body>
    <div id="tloin-nexus">
        <aside id="sidebar">
            <div class="brand"><h2>TLOIN ERP v24.4</h2></div>
            <div class="nav-header">Security Status</div>
            <div id="lock-indicator" style="padding: 15px; font-size: 10px; font-weight: 800; color: var(--gold);">SYSTEM UNLOCKED</div>
        </aside>

        <main id="main-dashboard">
            <div class="desk-header">
                <h2>Daily Attendance & Welfare</h2>
                <div style="font-size: 14px; font-weight: 800; color: var(--navy);" id="current-clock">00:00:00</div>
            </div>

            <div class="search-nexus">
                <span style="font-size: 12px;">üîç</span>
                <input type="text" id="student-search" placeholder="Quick Search Student Name or ID..." onkeyup="Logic.filterTable()">
            </div>

            <div class="grid-attendance">
                <div class="card" id="attendance-card">
                    <div id="lock-overlay">
                        <div style="font-size: 30px; margin-bottom: 10px;">üîí</div>
                        <h3 style="color: var(--navy); margin: 0;">Attendance Locked (After 10:00 AM)</h3>
                        <p style="font-size: 11px; color: #666; padding: 0 20px;">To edit, provide an explanation for the Principal.</p>
                        <textarea id="unlock-reason" style="width: 80%; margin-top: 15px;" placeholder="Reason for late attendance log..."></textarea>
                        <button class="btn-log btn-unlock" onclick="Logic.requestUnlock()">Send Unlock Request</button>
                    </div>

                    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:15px;">
                        <label>Class: Primary 1</label>
                        <button class="btn-log" id="save-btn" onclick="alert('Attendance Synced')">Save Roll Call</button>
                    </div>
                    <table class="data-table" id="student-table">
                        <thead>
                            <tr><th>Name</th><th>Status</th><th>Medical Flag</th></tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="s-name"><b>Kofi Mensah</b></td>
                                <td><select><option>Present</option><option>Absent</option></select></td>
                                <td><span style="color:red; font-size:9px;">ALLERGY: PEANUTS</span></td>
                            </tr>
                            <tr>
                                <td class="s-name"><b>Amma Asante</b></td>
                                <td><select><option>Present</option><option>Absent</option></select></td>
                                <td><span style="color:green; font-size:9px;">‚úî No History</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="card" style="border-top: 5px solid var(--health);">
                    <h3 style="font-size:12px; color:var(--health); margin-top:0;">Log Health Incident</h3>
                    <label>Select Student</label>
                    <select><option>Kofi Mensah</option><option>Amma Asante</option></select>
                    <label>Incident Details</label>
                    <textarea rows="3"></textarea>
                    <button class="btn-log" style="background:var(--health)">Submit Incident Report</button>
                </div>
            </div>
        </main>
    </div>

    <script>
        const Logic = {
            checkTime: () => {
                const now = new Date();
                const hours = now.getHours();
                const clock = document.getElementById('current-clock');
                clock.innerText = now.toLocaleTimeString();

                // LOCK LOGIC: If hour >= 10 (10 AM)
                if (hours >= 10) {
                    document.getElementById('lock-overlay').style.display = 'flex';
                    document.getElementById('lock-indicator').innerText = 'SYSTEM LOCKED (TIME)';
                    document.getElementById('lock-indicator').style.color = '#e74c3c';
                }
            },
            filterTable: () => {
                const query = document.getElementById('student-search').value.toLowerCase();
                const rows = document.querySelectorAll('#student-table tbody tr');
                rows.forEach(row => {
                    const name = row.querySelector('.s-name').innerText.toLowerCase();
                    row.style.display = name.includes(query) ? '' : 'none';
                });
            },
            requestUnlock: () => {
                const reason = document.getElementById('unlock-reason').value;
                if (!reason) return alert("Explanation is mandatory for unlock request.");
                alert("Request Sent to Principal. Standing by for authorization.");
            }
        };

        // Run clock and lock check every second
        setInterval(Logic.checkTime, 1000);
        Logic.checkTime();
    </script>
</body>
</html>
