<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>TLOIN & CLEVER MINDS - ERP v20.2</title>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
    
    <style>
        :root { 
            --navy: #050a30; --gold: #ffcc00; --bg: #f4f7f6; --white: #ffffff; 
            --border: #ced4da; --supply: #e67e22; --finance: #27ae60; --task: #8e44ad; --ict: #3498db; --gov: #2c3e50;
        }
        body, html { margin: 0; padding: 0; height: 100vh; font-family: 'Inter', sans-serif; background: var(--bg); overflow: hidden; }
        #tloin-nexus { display: grid; grid-template-columns: 320px 1fr; height: 100vh; width: 100vw; }
        
        #sidebar { background: var(--navy); color: white; display: flex; flex-direction: column; border-right: 5px solid var(--gold); overflow-y: auto; }
        .brand { padding: 25px; text-align: center; border-bottom: 1px solid rgba(255,255,255,0.1); position: sticky; top: 0; background: var(--navy); z-index: 100; }
        .brand h2 { margin: 0; font-size: 13px; color: var(--gold); text-transform: uppercase; letter-spacing: 2px; }
        
        .nav-header { padding: 15px 25px 5px; font-size: 9px; color: rgba(255,255,255,0.4); text-transform: uppercase; font-weight: 800; }
        .desk-link { padding: 10px 25px; cursor: pointer; color: #aab0b6; font-size: 11px; transition: 0.2s; border-left: 4px solid transparent; }
        .desk-link:hover { background: rgba(255,255,255,0.05); color: white; border-left-color: var(--gold); }

        #main-dashboard { padding: 35px; overflow-y: auto; height: 100vh; box-sizing: border-box; }
        .form-card { background: var(--white); padding: 30px; border-radius: 8px; border: 1px solid var(--border); margin-bottom: 25px; }
        .grid-3 { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; }
        
        label { display: block; font-size: 10px; font-weight: 700; margin-bottom: 6px; color: var(--navy); text-transform: uppercase; }
        .btn-erp { background: var(--navy); color: white; border: none; padding: 14px; border-radius: 4px; cursor: pointer; font-weight: 700; text-transform: uppercase; width: 100%; margin-top: 15px; }

        .data-table { width: 100%; border-collapse: collapse; background: white; margin-top: 20px; font-size: 11px; }
        .data-table th { background: #f8f9fa; padding: 12px; text-align: left; border-bottom: 2px solid var(--navy); color: var(--navy); text-transform: uppercase; }
        .data-table td { padding: 12px; border-bottom: 1px solid #eee; }
        
        .status-pill { padding: 4px 8px; border-radius: 4px; font-size: 9px; font-weight: bold; }
        .under { background: #d4edda; color: #155724; }
        .over { background: #f8d7da; color: #721c24; }
        .preview-tag { float: right; color: var(--gold); font-size: 9px; border: 1px solid var(--gold); padding: 2px 5px; border-radius: 3px; }
    </style>
</head>
<body>
    <div id="tloin-nexus">
        <aside id="sidebar">
            <div class="brand"><h2>TLOIN ERP v20.2</h2></div>
            
            <div class="nav-header">Active Previews</div>
            <div class="desk-link" onclick="Nexus.load('Finance')">Budget & Finance</div>
            <div class="desk-link" onclick="Nexus.load('ICT')">ICT Hub Performance</div>
            <div class="desk-link" onclick="Nexus.load('Tasks')">Internal Task Manager</div>
            <div class="desk-link" onclick="Nexus.load('Board')">Board Governance</div>
            <div class="desk-link" onclick="Nexus.load('Supply')">Vendor Registry</div>
            
            <div class="nav-header">System Operations</div>
            <div class="desk-link" onclick="Nexus.load('Asset')">Asset Registry</div>
            <div class="desk-link" onclick="Nexus.load('Volunteer')">Volunteers & Interns</div>
            <div class="desk-link" onclick="Nexus.load('Policy')">Legal Vault</div>
        </aside>

        <main id="main-dashboard">
            <div id="mount-point"></div>
        </main>
    </div>

    <script>
        const VAULT = {
            get: (key) => JSON.parse(localStorage.getItem(key)) || [],
            save: (key, data) => localStorage.setItem(key, JSON.stringify(data))
        };

        // GLOBAL MOCK DATA FOR THE PREVIEW FEEL
        const seed = () => {
            if(!localStorage.getItem('cm_finance_erp')) VAULT.save('cm_finance_erp', [{dept:'ICT Training', budget:20000, actual:18500, status:'under'}, {dept:'Mobile Outreach', budget:5000, actual:6200, status:'over'}]);
            if(!localStorage.getItem('cm_ict_erp')) VAULT.save('cm_ict_erp', [{date:'2025-12-30', hub:'Tamale Hub', students:42, data:'15GB'}, {date:'2025-12-30', hub:'Accra Hub', students:38, data:'80GB'}]);
            if(!localStorage.getItem('cm_task_erp')) VAULT.save('cm_task_erp', [{deadline:'2026-01-10', title:'Q1 Strategic Review', assignee:'Director', status:'Pending'}, {deadline:'2025-12-31', title:'Submit Tax Returns', assignee:'Accountant', status:'Ongoing'}]);
            if(!localStorage.getItem('cm_board_erp')) VAULT.save('cm_board_erp', [{date:'2025-11-20', ref:'BR-09', subject:'New Hub Acquisition', outcome:'Passed'}, {date:'2025-12-15', ref:'BR-10', subject:'Volunteer Stipend Review', outcome:'Deferred'}]);
            if(!localStorage.getItem('cm_vendor_erp')) VAULT.save('cm_vendor_erp', [{name:'Starlink Ghana', service:'High-Speed Data', contact:'Support', rating:'★★★★★'}, {name:'OfficeTop', service:'Stationery', contact:'0244...', rating:'★★★☆☆'}]);
        };
        seed();

        const Desks = {
            Finance: () => {
                const rows = VAULT.get('cm_finance_erp').map(l => `<tr><td><b>${l.dept}</b></td><td>GHS ${l.budget}</td><td>GHS ${l.actual}</td><td><span class="status-pill ${l.status}">${l.status.toUpperCase()}</span></td></tr>`).join('');
                return `<h3><span class="preview-tag">LIVE DATA</span>Budgetary Control</h3><table class="data-table"><thead><tr><th>Dept</th><th>Budget</th><th>Actual</th><th>Variance</th></tr></thead><tbody>${rows}</tbody></table>`;
            },
            ICT: () => {
                const rows = VAULT.get('cm_ict_erp').map(l => `<tr><td>${l.date}</td><td><b>${l.hub}</b></td><td>${l.students} Students</td><td>${l.data} Left</td></tr>`).join('');
                return `<h3><span class="preview-tag">LIVE DATA</span>ICT Hub Performance</h3><table class="data-table"><thead><tr><th>Date</th><th>Hub</th><th>Attendance</th><th>Internet</th></tr></thead><tbody>${rows}</tbody></table>`;
            },
            Tasks: () => {
                const rows = VAULT.get('cm_task_erp').map(l => `<tr><td>${l.deadline}</td><td><b>${l.title}</b></td><td>${l.assignee}</td><td>${l.status}</td></tr>`).join('');
                return `<h3><span class="preview-tag">LIVE DATA</span>Task Tracking</h3><table class="data-table"><thead><tr><th>Deadline</th><th>Task</th><th>Assignee</th><th>Status</th></tr></thead><tbody>${rows}</tbody></table>`;
            },
            Board: () => {
                const rows = VAULT.get('cm_board_erp').map(l => `<tr><td>${l.date}</td><td>${l.ref}</td><td><b>${l.subject}</b></td><td>${l.outcome}</td></tr>`).join('');
                return `<h3><span class="preview-tag">LIVE DATA</span>Board Resolutions</h3><table class="data-table"><thead><tr><th>Date</th><th>Ref</th><th>Subject</th><th>Result</th></tr></thead><tbody>${rows}</tbody></table>`;
            },
            Supply: () => {
                const rows = VAULT.get('cm_vendor_erp').map(l => `<tr><td><b>${l.name}</b></td><td>${l.service}</td><td>${l.contact}</td><td>${l.rating}</td></tr>`).join('');
                return `<h3><span class="preview-tag">LIVE DATA</span>Vendor Registry</h3><table class="data-table"><thead><tr><th>Vendor</th><th>Service</th><th>Contact</th><th>Rating</th></tr></thead><tbody>${rows}</tbody></table>`;
            },
            Asset: () => `<h3>Asset Registry</h3><p>Locked & Static.</p>`,
            Volunteer: () => `<h3>Volunteers & Interns</h3><p>Locked & Static.</p>`,
            Policy: () => `<h3>Legal Vault</h3><p>Locked & Static.</p>`
        };

        const Nexus = {
            load: (d) => { document.getElementById('mount-point').innerHTML = Desks[d] ? Desks[d]() : `<h2>Loading...</h2>`; }
        };

        Nexus.load('Finance');
    </script>
</body>
</html>
